# 边缘世界农场计算器

![版本](https://img.shields.io/badge/版本-1.0-blue)
![游戏版本](https://img.shields.io/badge/游戏版本-1.5.4069-orange)

一款专为游戏"边缘世界"(RimWorld)设计的农场规划工具，帮助玩家优化殖民地的种植计划和餐饮生产。

## 📋 功能特点

- **农场需求计算**：根据殖民者数量和作物类型计算所需种植面积
- **土地效率分析**：考虑不同土地类型对作物生长的影响
- **最优布局推荐**：提供最接近正方形的种植布局建议
- **餐饮产出估算**：计算生产的食物可以支持的殖民者数量
- **可视化展示**：直观展示农场布局和餐饮支持能力
- **双界面模式**：提供命令行界面和图形用户界面两种使用方式

## 🚀 使用方法

### 安装要求

- Python 3.6 或更高版本
- 图形界面依赖tkinter和PIL库
  ```
  pip install pillow
  ```

### 启动程序

**命令行模式**:
```bash
python main.py
```

**图形界面模式**:
```bash
python gui.py
```

**查看帮助文档**:
```bash
python README.py
```

### 使用步骤

#### 命令行界面：
1. 运行`main.py`启动命令行界面
2. 从主菜单选择"进行农场计算"
3. 按照提示输入殖民者数量和生长期天数
4. 选择要种植的作物类型和土地类型
5. 查看计算结果，包括所需格数、推荐布局和餐饮产出能力

#### 图形界面：
1. 运行`gui.py`启动图形界面
2. 在左侧表单中输入以下参数：
   - 殖民者数量
   - 生长期天数（通常为60天，即一个游戏年）
   - 选择作物类型
   - 选择土地类型
3. 点击"计算"按钮
4. 在右侧查看详细的计算结果和推荐布局

## 📊 数据说明

本工具内置了以下数据：

### 作物数据
- **土豆**：基础产量11，肥力敏感度0.4
- **玉米**：基础产量22，肥力敏感度1.0
- **水稻**：基础产量6，肥力敏感度1.0

### 土地类型
- **沙砾地块**：肥力系数0.7
- **普通土地**：肥力系数1.0
- **肥沃土地**：肥力系数1.4
- **水栽培植物盆**：肥力系数2.8 (仅支持部分作物)

### 食物消耗
- 每位殖民者每天需要1.6单位营养值
- 餐饮类型：
  - **简单饭菜**：0.5单位食材产出0.9单位营养值
  - **营养膏**：0.3单位食材产出0.9单位营养值

## 💡 计算原理

1. **产量计算**：`base_yield × harvests × effective_fertility`
   - `effective_fertility` = 1 + (soil.fertility - 1) × crop.fertility_sensitivity
   
2. **格数需求**：`nutrition_needed / (annual_yield × 0.05) × 1.05`
   - `nutrition_needed` = 殖民者数量 × 1.6 × 年天数
   - 最终结果增加5%作为冗余

3. **布局优化**：算法优先查找接近正方形的布局，允许10%以内的长宽差异

## ⚠️ 注意事项

1. 计算结果已包含5%的产量冗余，以应对可能的意外损失
2. 推荐布局优先考虑近似正方形，允许10%以内的长宽差异
3. 实际游戏中，还需考虑光照、温度、种植者技能等因素
4. 本工具基于游戏版本1.5.4069的数据，新版本可能有所变化

## 🧰 技术实现

本软件使用Python编写，包含以下主要文件：

- `main.py` - 命令行界面和核心计算逻辑
- `gui.py` - 基于tkinter的图形用户界面
- `README.py` - 可视化帮助文档

## 👤 关于作者

本工具由"吾之野望"开发，旨在提高边缘世界游戏体验。
如有问题或建议，欢迎提出。

## 📝 许可证

本项目采用MIT许可证。

---

祝您在边缘世界的殖民地蓬勃发展！
